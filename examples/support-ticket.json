{
  "name": "support-ticket",
  "description": "A support ticket system: new tickets can be assigned, worked on, escalated, resolved, or closed. Customers can reopen closed tickets.",
  "places": [
    {"id": "new", "description": "Ticket just created, awaiting triage", "initial": 1},
    {"id": "assigned", "description": "Ticket assigned to an agent", "initial": 0},
    {"id": "in_progress", "description": "Agent is actively working on ticket", "initial": 0},
    {"id": "escalated", "description": "Ticket escalated to senior support", "initial": 0},
    {"id": "pending_customer", "description": "Waiting for customer response", "initial": 0},
    {"id": "resolved", "description": "Issue has been resolved", "initial": 0},
    {"id": "closed", "description": "Ticket is closed", "initial": 0}
  ],
  "transitions": [
    {"id": "assign", "description": "Assign ticket to an agent"},
    {"id": "start_work", "description": "Begin working on the ticket"},
    {"id": "escalate", "description": "Escalate to senior support"},
    {"id": "request_info", "description": "Request more information from customer"},
    {"id": "customer_reply", "description": "Customer provides requested information"},
    {"id": "resolve", "description": "Mark issue as resolved"},
    {"id": "close", "description": "Close the ticket"},
    {"id": "reopen", "description": "Customer reopens a closed ticket"}
  ],
  "arcs": [
    {"from": "new", "to": "assign"},
    {"from": "assign", "to": "assigned"},
    {"from": "assigned", "to": "start_work"},
    {"from": "start_work", "to": "in_progress"},
    {"from": "in_progress", "to": "escalate"},
    {"from": "escalate", "to": "escalated"},
    {"from": "escalated", "to": "resolve"},
    {"from": "in_progress", "to": "request_info"},
    {"from": "request_info", "to": "pending_customer"},
    {"from": "pending_customer", "to": "customer_reply"},
    {"from": "customer_reply", "to": "in_progress"},
    {"from": "in_progress", "to": "resolve"},
    {"from": "resolve", "to": "resolved"},
    {"from": "resolved", "to": "close"},
    {"from": "close", "to": "closed"},
    {"from": "closed", "to": "reopen"},
    {"from": "reopen", "to": "new"}
  ],
  "roles": [
    {
      "id": "customer",
      "name": "Customer",
      "description": "End user who submits support tickets"
    },
    {
      "id": "agent",
      "name": "Support Agent",
      "description": "First-line support agent who handles tickets"
    },
    {
      "id": "supervisor",
      "name": "Supervisor",
      "description": "Senior support who handles escalations",
      "inherits": ["agent"]
    },
    {
      "id": "admin",
      "name": "Administrator",
      "description": "Full access to all operations",
      "inherits": ["supervisor"]
    }
  ],
  "access": [
    {
      "transition": "assign",
      "roles": ["agent"]
    },
    {
      "transition": "start_work",
      "roles": ["agent"]
    },
    {
      "transition": "escalate",
      "roles": ["agent"]
    },
    {
      "transition": "request_info",
      "roles": ["agent"]
    },
    {
      "transition": "customer_reply",
      "roles": ["customer"]
    },
    {
      "transition": "resolve",
      "roles": ["agent"]
    },
    {
      "transition": "close",
      "roles": ["agent"]
    },
    {
      "transition": "reopen",
      "roles": ["customer"]
    }
  ],
  "views": [
    {
      "id": "ticket-table",
      "name": "Tickets List",
      "kind": "table",
      "description": "List view of all support tickets",
      "groups": [
        {
          "id": "columns",
          "fields": [
            {"binding": "ticket_id", "label": "Ticket #", "type": "text", "readonly": true},
            {"binding": "subject", "label": "Subject", "type": "text", "readonly": true},
            {"binding": "priority", "label": "Priority", "type": "text", "readonly": true},
            {"binding": "status", "label": "Status", "type": "text", "readonly": true},
            {"binding": "assigned_to", "label": "Assigned To", "type": "text", "readonly": true},
            {"binding": "created_at", "label": "Created", "type": "date", "readonly": true}
          ]
        }
      ],
      "actions": ["assign", "start_work", "escalate", "resolve"]
    },
    {
      "id": "ticket-detail",
      "name": "Ticket Detail",
      "kind": "detail",
      "description": "Full support ticket details",
      "groups": [
        {
          "id": "ticket",
          "name": "Ticket Information",
          "fields": [
            {"binding": "ticket_id", "label": "Ticket #", "type": "text", "readonly": true},
            {"binding": "subject", "label": "Subject", "type": "text", "readonly": true},
            {"binding": "description", "label": "Description", "type": "textarea", "readonly": true},
            {"binding": "priority", "label": "Priority", "type": "text", "readonly": true},
            {"binding": "status", "label": "Status", "type": "text", "readonly": true}
          ]
        },
        {
          "id": "customer",
          "name": "Customer Information",
          "fields": [
            {"binding": "customer_name", "label": "Name", "type": "text", "readonly": true},
            {"binding": "customer_email", "label": "Email", "type": "email", "readonly": true}
          ]
        },
        {
          "id": "assignment",
          "name": "Assignment",
          "fields": [
            {"binding": "assigned_to", "label": "Assigned To", "type": "text", "readonly": true},
            {"binding": "assigned_at", "label": "Assigned At", "type": "date", "readonly": true}
          ]
        }
      ],
      "actions": ["assign", "start_work", "escalate", "request_info", "resolve", "close", "reopen"]
    },
    {
      "id": "ticket-form",
      "name": "New Ticket",
      "kind": "form",
      "description": "Form for submitting a new support ticket",
      "groups": [
        {
          "id": "ticket",
          "name": "Ticket Details",
          "fields": [
            {"binding": "subject", "label": "Subject", "type": "text", "required": true, "placeholder": "Brief description of the issue"},
            {"binding": "description", "label": "Description", "type": "textarea", "required": true, "placeholder": "Detailed description of the problem"},
            {"binding": "priority", "label": "Priority", "type": "select", "required": true}
          ]
        },
        {
          "id": "contact",
          "name": "Contact Information",
          "fields": [
            {"binding": "customer_name", "label": "Your Name", "type": "text", "required": true},
            {"binding": "customer_email", "label": "Your Email", "type": "email", "required": true}
          ]
        }
      ],
      "actions": ["assign"]
    }
  ]
}
