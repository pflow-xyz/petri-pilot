{
  "name": "blog-post",
  "description": "A blog post workflow with persistence and search",
  "debug": {
    "enabled": true,
    "eval": true
  },
  "admin": {
    "enabled": true,
    "path": "/admin",
    "roles": ["admin", "editor"],
    "features": ["list", "detail", "history"]
  },
  "navigation": {
    "brand": "Blog",
    "items": [
      {"label": "Posts", "path": "/", "icon": "üìù"},
      {"label": "Admin", "path": "/admin", "icon": "‚öôÔ∏è", "roles": ["admin", "editor"]}
    ]
  },
  "events": [
    {
      "id": "post_created",
      "name": "PostCreated",
      "description": "A new blog post was created",
      "fields": [
        {"name": "title", "type": "string", "required": true},
        {"name": "content", "type": "string", "required": true},
        {"name": "author_id", "type": "string", "required": true},
        {"name": "author_name", "type": "string", "required": true},
        {"name": "tags", "type": "[]string"}
      ]
    },
    {
      "id": "post_updated",
      "name": "PostUpdated",
      "description": "Blog post content was updated",
      "fields": [
        {"name": "title", "type": "string"},
        {"name": "content", "type": "string"},
        {"name": "tags", "type": "[]string"}
      ]
    },
    {
      "id": "post_submitted",
      "name": "PostSubmitted",
      "description": "Post submitted for review"
    },
    {
      "id": "post_approved",
      "name": "PostApproved",
      "description": "Post approved and published",
      "fields": [
        {"name": "approved_by", "type": "string", "required": true}
      ]
    },
    {
      "id": "post_rejected",
      "name": "PostRejected",
      "description": "Post rejected back to draft",
      "fields": [
        {"name": "rejected_by", "type": "string", "required": true},
        {"name": "reason", "type": "string"}
      ]
    },
    {
      "id": "post_unpublished",
      "name": "PostUnpublished",
      "description": "Published post taken down"
    },
    {
      "id": "post_restored",
      "name": "PostRestored",
      "description": "Archived post restored to draft"
    }
  ],
  "places": [
    {"id": "draft", "description": "Post is being written", "initial": 1},
    {"id": "in_review", "description": "Post is awaiting editorial review", "initial": 0},
    {"id": "published", "description": "Post is live on the site", "initial": 0},
    {"id": "archived", "description": "Post has been taken down", "initial": 0}
  ],
  "transitions": [
    {
      "id": "create",
      "description": "Create a new blog post",
      "event": "post_created",
      "fields": [
        {"name": "title", "label": "Title", "type": "text", "required": true, "placeholder": "Post title"},
        {"name": "content", "label": "Content", "type": "textarea", "required": true, "placeholder": "Write your post..."},
        {"name": "tags", "label": "Tags", "type": "text", "placeholder": "Comma-separated tags"}
      ]
    },
    {
      "id": "update",
      "description": "Update post content",
      "event": "post_updated",
      "fields": [
        {"name": "title", "label": "Title", "type": "text", "placeholder": "Post title"},
        {"name": "content", "label": "Content", "type": "textarea", "placeholder": "Write your post..."},
        {"name": "tags", "label": "Tags", "type": "text", "placeholder": "Comma-separated tags"}
      ]
    },
    {"id": "submit", "description": "Submit draft for review", "event": "post_submitted"},
    {
      "id": "approve",
      "description": "Approve and publish the post",
      "event": "post_approved"
    },
    {
      "id": "reject",
      "description": "Reject and return to draft",
      "event": "post_rejected",
      "fields": [
        {"name": "reason", "label": "Reason", "type": "textarea", "placeholder": "Why is this being rejected?"}
      ]
    },
    {"id": "unpublish", "description": "Take down a published post", "event": "post_unpublished"},
    {"id": "restore", "description": "Restore archived post to draft", "event": "post_restored"}
  ],
  "arcs": [
    {"from": "create", "to": "draft"},
    {"from": "draft", "to": "update"},
    {"from": "update", "to": "draft"},
    {"from": "draft", "to": "submit"},
    {"from": "submit", "to": "in_review"},
    {"from": "in_review", "to": "approve"},
    {"from": "approve", "to": "published"},
    {"from": "in_review", "to": "reject"},
    {"from": "reject", "to": "draft"},
    {"from": "published", "to": "unpublish"},
    {"from": "unpublish", "to": "archived"},
    {"from": "archived", "to": "restore"},
    {"from": "restore", "to": "draft"},
    {"from": "draft", "to": "update"},
    {"from": "update", "to": "draft"}
  ],
  "roles": [
    {
      "id": "author",
      "name": "Author",
      "description": "Content creator who writes and submits posts"
    },
    {
      "id": "editor",
      "name": "Editor",
      "description": "Reviews and approves/rejects submitted posts"
    },
    {
      "id": "admin",
      "name": "Administrator",
      "description": "Full access to all operations",
      "inherits": ["author", "editor"]
    }
  ],
  "access": [
    {"transition": "create", "roles": ["author"]},
    {"transition": "update", "roles": ["author"]},
    {"transition": "submit", "roles": ["author"]},
    {"transition": "approve", "roles": ["editor"]},
    {"transition": "reject", "roles": ["editor"]},
    {"transition": "unpublish", "roles": ["editor"]},
    {"transition": "restore", "roles": ["admin"]}
  ],
  "views": [
    {
      "id": "post-list",
      "name": "All Posts",
      "kind": "table",
      "description": "List view of all blog posts",
      "groups": [
        {
          "id": "columns",
          "fields": [
            {"binding": "status", "label": "Status", "type": "badge", "readonly": true}
          ]
        }
      ],
      "actions": ["submit", "approve", "reject"]
    },
    {
      "id": "post-detail",
      "name": "Post Detail",
      "kind": "detail",
      "description": "Full detail view of a blog post",
      "groups": [
        {
          "id": "workflow",
          "name": "Workflow",
          "fields": [
            {"binding": "status", "label": "Status", "type": "badge", "readonly": true}
          ]
        }
      ],
      "actions": ["update", "submit", "approve", "reject", "unpublish", "restore"]
    }
  ]
}
